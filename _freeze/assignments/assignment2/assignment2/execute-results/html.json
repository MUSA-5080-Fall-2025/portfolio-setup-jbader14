{
  "hash": "7d2b65d10f03612d576ad3ff26c5ac02",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Assignment 2: Spatial Analysis and Visualization\"\nsubtitle: \"Healthcare Access and Equity in Pennsylvania\"\nauthor: \"Henry (Jack) Bader\"\ndate: today\nformat: \n  html:\n    code-fold: false\n    toc: true\n    toc-location: left\n    theme: cosmo\n    embed-resources: true\nexecute:\n  warning: false\n  message: false\n---\n\n## Assignment Overview\n\n**Learning Objectives:**\n\n\n- Apply spatial operations to answer policy-relevant research questions\n\n\n- Integrate census demographic data with spatial analysis\n\n\n- Create publication-quality visualizations and maps\n\n\n- Work with spatial data from multiple sources\n\n\n- Communicate findings effectively for policy audiences\n\n---\n\n## Part 1: Healthcare Access for Vulnerable Populations\n\n### Research Question\n\n**Which Pennsylvania counties have the highest proportion of vulnerable populations (elderly + low-income) living far from hospitals?**\n\nYour analysis should identify counties that should be priorities for healthcare investment and policy intervention.\n\n### Required Analysis Steps\n\nComplete the following analysis, documenting each step with code and brief explanations:\n\n#### Step 1: Data Collection (5 points)\n\nLoad the required spatial data:\n\n\n- Pennsylvania county boundaries\n\n\n- Pennsylvania hospitals (from lecture data)\n\n\n- Pennsylvania census tracts\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load required packages\nlibrary(tidycensus)\nlibrary(tidyverse)\nlibrary(knitr)\nlibrary(scales)\nlibrary(RColorBrewer)\nlibrary(sf)\nlibrary(ggplot2)\nlibrary(tigris)\nlibrary(patchwork)\nlibrary(here)\n\n# Hides progress bars from output\noptions(tigris_use_cache = TRUE, tigris_progress = FALSE) \n\n\n# Load spatial data\npa_county_bounds <- st_read(\"data/Pennsylvania_County_Boundaries.shp\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `Pennsylvania_County_Boundaries' from data source \n  `/Users/jack/Documents/GitHub/portfolio-setup-jbader14/assignments/assignment2/data/Pennsylvania_County_Boundaries.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 67 features and 19 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -8963377 ymin: 4825316 xmax: -8314404 ymax: 5201413\nProjected CRS: WGS 84 / Pseudo-Mercator\n```\n\n\n:::\n\n```{.r .cell-code}\nhospitals <- st_read(\"data/hospitals.geojson\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `hospitals' from data source \n  `/Users/jack/Documents/GitHub/portfolio-setup-jbader14/assignments/assignment2/data/hospitals.geojson' \n  using driver `GeoJSON'\nSimple feature collection with 223 features and 11 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -80.49621 ymin: 39.75163 xmax: -74.86704 ymax: 42.13403\nGeodetic CRS:  WGS 84\n```\n\n\n:::\n\n```{.r .cell-code}\n# Check that all data loaded correctly - hidden from submission\n#head(pa_county_bounds)\n# head(hospitals)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# How many hospitals in your dataset?\ncount_hospitals <- hospitals |>\n  distinct(FACILITY_N) |>\n  nrow()\n\n# How many census tracts?\npa_tract_bounds <- tracts(state = \"PA\", cb = TRUE)\n\ncount_tract <- pa_tract_bounds |>\n  distinct(NAMELSAD) |>\n  nrow()\n\n# What coordinate reference system is each dataset in?\n# HIDDEN from output\n# st_crs(pa_county_bounds)\n# st_crs(hospitals)\n```\n:::\n\n\n**Analysis:**\n\n\n- There are 222 hospitals and 2547 census tracts in PA from our datasets. Both datasets are using the WGS 84 coordinate reference systems.\n\n---\n\n#### Step 2: Get Demographic Data \n\nUse `tidycensus` to download tract-level demographic data for Pennsylvania.\n\n**Required variables:**\n\n\n- Total population\n\n\n- Median household income\n\n\n- Population 65 years and over (you may need to sum multiple age categories)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get demographic data from ACS\n\n# Set census api key\nkey <- Sys.getenv(\"CENSUS_API_KEY\")\ncensus_api_key(key)\n\n# Define age groups 65+\nage_groups_65_plus <- c(\n  male_65_66 = \"B01001_020\",\n  male_67_69 = \"B01001_021\",\n  male_70_74 = \"B01001_022\",\n  male_75_79 = \"B01001_023\",\n  male_80_84 = \"B01001_024\",\n  male_85_plus = \"B01001_025\",\n  fem_65_66 = \"B01001_044\",\n  fem_67_69 = \"B01001_045\",\n  fem_70_74 = \"B01001_046\",\n  fem_75_79 = \"B01001_047\",\n  fem_80_84 = \"B01001_048\",\n  fem_85_plus = \"B01001_049\"\n)\n\n# 65+ categories to sum over\ncols_65_plus <- c(\n  \"male_65_66E\",\"male_67_69E\",\"male_70_74E\",\"male_75_79E\",\"male_80_84E\",\"male_85_plusE\",\n  \"fem_65_66E\",\"fem_67_69E\",\"fem_70_74E\",\"fem_75_79E\",\"fem_80_84E\",\"fem_85_plusE\"\n)\n\n# Build variable set\nvariables <- c(\n  total_pop     = \"B01003_001\",\n  age_groups_65_plus,\n  median_income = \"B19013_001\"\n)\n\npa_tract_demo <- get_acs(\n  geography = \"tract\",\n  variables = variables,\n  state = \"PA\", \n  year = 2022,\n  survey = \"acs5\",\n  output = \"wide\"\n  ) |>\n  # Sum columns for age groups > 65\n  mutate(\n    pop_65_plusE = rowSums(across(all_of(cols_65_plus)), na.rm = TRUE)\n  ) |>\n  # Select relevant columns\n  select(GEOID, total_popE, pop_65_plusE, median_incomeE)\n\n# Join to tract boundaries\npa_tract_full <- pa_tract_bounds |>\n  left_join(pa_tract_demo, by = \"GEOID\")\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# How many tracts have missing income data? \nmissing_income <- pa_tract_demo |>\n  filter(is.na(median_incomeE)) |>\n  nrow()\n\n# What is the median income across all PA census tracts?\nmedian_income <- pa_tract_demo |>\n  summarize(median_income = median(median_incomeE, na.rm = TRUE))\n```\n:::\n\n\n**Analysis:**\n\n\n- The ACS data in this analysis is from 2022 for PA where 63 tracts have missing income data and the median income across all tracts is $70,188.\n\n---\n\n#### Step 3: Define Vulnerable Populations \n\nIdentify census tracts with vulnerable populations based on TWO criteria:\n\n\n1. Low median household income (choose an appropriate threshold)\n\n\n2. Significant elderly population (choose an appropriate threshold)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filter for vulnerable tracts based on your criteria\n\n# Create elderly population percentage\npa_tract_full <- pa_tract_full |>\n  mutate(\n    percent_65_plus = round(100 * pop_65_plusE / total_popE, 2)\n  )\n\n# Define thresholds for each criteria\n# Low median household income: <= 25th percentile\n# High elderly population percentage: >= 75th percentile\nincome_thr   <- quantile(pa_tract_full$median_incomeE, probs = 0.10, na.rm = TRUE)\nelderly_thr  <- quantile(pa_tract_full$percent_65_plus, probs = 0.90, na.rm = TRUE)\n\n# Create new df with flagged thresholds\npa_tract_flagged <- pa_tract_full |>\n  mutate(\n    # Construct boolean cols for income and elderly vulnerable tracts\n    # Handle NA entries\n    income_vuln = (!is.na(median_incomeE)) & (median_incomeE <= income_thr),\n    elderly_vuln = (!is.na(percent_65_plus)) & (percent_65_plus >= elderly_thr),\n    # Tract is vulnerable if below income thresh OR above elderly thresh\n    vulnerable = income_vuln | elderly_vuln\n  )\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# How many tracts meet your vulnerability criteria?\ncount_vuln <- sum(pa_tract_flagged$vulnerable, na.rm = TRUE)\n\n# What percentage of PA census tracts are considered vulnerable by your definition?\npercent_vuln <- round(100 * count_vuln / 2547, 2)\n```\n:::\n\n\n**Analysis:**\n\n\n- The income threshold is set to identify vulnerable tracts for all tracts that fall at or below the 10th percentile of median household income. Instead of setting an arbitrary threshold value like $50,000, this method will flag the lowest 10% of median incomes as vulnerable.\n\n\n- Similarly, the elderly population threshold is set to identify vulnerable tracts for all tracts that fall at or above the 90th percentile of elderly populations. The tracts the highest 10% of elderly population percentages are flagged as vulnerable. We chose to use elderly population percentages over raw estimates to normalize for total tract populations.\n\n\n- 659 tracts are classified as vulnerable, meaning they are either vulnerable by a low median income or high elderly population, which accounts for 25.87% of tracts. After testing different thresholds such as 25th income / 75th elderly population percentiles and using \"and\", meaning both conditions must be true. I opted to make both thresholds stricter but use \"or\", only one condition must be true. Ultimately, this decision led to more insightful results when analyzing underserved tracts with respect to vulnerable ones, which was conducted later in my analysis.\n\n---\n\n#### Step 4: Calculate Distance to Hospitals \n\nFor each vulnerable tract, calculate the distance to the nearest hospital.\n\n\\\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate distance from each tract centroid to nearest hospital\n\n# Get centroids of each tract (POINT)\ncentroids <- st_centroid(pa_tract_flagged) \n\n# Transform to US Albers Equal Area CRS\ncentroids <- st_transform(centroids, 5070)\nhospitals <- st_transform(hospitals, 5070)\n\n# Create distance matrix between centroids & hospitals\ndistance_matrix <- st_distance(centroids, hospitals)\n\n# Find closest hospital to each centroid\nmin_dist <- apply(distance_matrix, 1, min)\n\n# Create new df with feature for distance to nearest hospital\npa_tract_flagged <- pa_tract_flagged |>\n  mutate(\n    # Convert nearest diff to miles\n    dist_to_near_hosp = round(as.numeric(min_dist) * 0.000621371192, 2)\n  )\n\npa_tract_vuln <- pa_tract_flagged |>\n  # Filter for only vulnerable tracts\n  filter(vulnerable)\n```\n:::\n\n\n**Requirements:**\n- Use an appropriate projected coordinate system for Pennsylvania\n- Calculate distances in miles\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# What is the average distance to the nearest hospital for vulnerable tracts?\navg_dist_to_hosp <- round(mean(pa_tract_vuln$dist_to_near_hosp, na.rm = TRUE), 2)\n\n# What is the maximum distance?\nmax_dist_to_hosp <- max(pa_tract_vuln$dist_to_near_hosp, na.rm = TRUE)\n\n# How many vulnerable tracts are more than 15 miles from the nearest hospital?\ncount_tracts_far_from_hosp <- sum(pa_tract_vuln$dist_to_near_hosp > 15, na.rm = TRUE)\n```\n:::\n\n\n**Analysis:**\n\n\n- We are using the US Albers Equal Area projection because it preserves areas and distances without much distortion like the Web Mercator projection. It also has been proven to be effective to use with demographic and statistical analysis in the United States, making it a strong choice for this work.\n\n\n- Anong vulnerable tracts, the average distance to the nearest hospital for vulnerable tracts is 3.6 miles, and the maximum distance is 28.98 miles.\n\n\n- There are 19 vulnerable tracts whose nearest hospital is greater than 15 miles away. These tracts are categorized as underserved in step 5.\n\n---\n\n#### Step 5: Identify Underserved Areas \n\nDefine \"underserved\" as vulnerable tracts that are more than 15 miles from the nearest hospital.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create underserved variable\npa_tract_flagged <- pa_tract_flagged |>\n  mutate(\n    underserved = case_when((dist_to_near_hosp > 15 & vulnerable == TRUE) ~ TRUE)\n  ) \n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Count number of underserved tracts\ncount_underserved <- round(sum(pa_tract_flagged$underserved == TRUE, na.rm = TRUE), 2)\n\n# What percentage of vulnerable tracts are underserved?\npercent_underserved <- round(100 * count_tracts_far_from_hosp / count_vuln, 2)\n```\n:::\n\n\n**Analysis:**\n\n\n- As discussed previously, there are 19 underserved tracts. 2.88% of vulnerable tracts are classified as underserved. This metric seems somewhat surprisingly low to me. It would make sense that vulnerable tracts with lower median incomes would have worse access to hospitals than this. However, we must remember that some vulnerable tracts are classified only by high elderly population percentages. Intuitively, these tracts should have more hospitals nearby since elderly populations would most likely need access to more hospital resources and services than younger populations. Since these two effects inversely relate to one another, it makes some sense why only a small percentage of vulnerable tracts are classified as underserved; however, the metric still seems low to me. In a future analysis, it could be worthwhile to experiment with a lower threshold for distance to nearest hospital to get more concrete results of underserved tracts in PA.\n\n---\n\n#### Step 6: Aggregate to County Level\n\nUse spatial joins and aggregation to calculate county-level statistics about vulnerable populations and hospital access.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Transform CRS\npa_tract_flagged <- st_transform(pa_tract_flagged, 5070)\npa_county_bounds <- st_transform(pa_county_bounds, 5070)\n\ncounty_level_stats <- pa_tract_flagged |>\n  # Spatial join tracts to counties\n  st_join(pa_county_bounds) |>\n  # Drop geom\n  st_drop_geometry() |>\n  # Group by county\n  group_by(COUNTY_NAM) |>\n  # Aggregate statistics by county\n  summarize(\n    # Number of vulnerable tracts\n    n_vuln_tracts = sum(vulnerable, na.rm = TRUE),\n    # Underserved total pop\n    total_under_pop = sum(total_popE[underserved], na.rm = TRUE),\n    # Percentage of vulnerable tracts that are underserved\n    n_under_tracts = sum(underserved, na.rm = TRUE),\n    pct_under_of_vuln = round(dplyr::if_else(\n      n_vuln_tracts > 0,\n      100 * n_under_tracts / n_vuln_tracts,\n      0), \n      2),\n    # Avg hospital distance for vulnerable tracts\n    avg_dist_vuln_hosp = round(mean(dist_to_near_hosp[vulnerable], na.rm = TRUE), 2),\n    # Total vulnerable population\n    total_vuln_pop = sum(total_popE[vulnerable], na.rm = TRUE)\n  ) |>\n  ungroup()\n\n# county_level_stats - hidden from output\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Which 5 counties have the highest percentage of underserved vulnerable tracts?\ntop5_counties_under <- county_level_stats |>\n  arrange(desc(pct_under_of_vuln)) |>\n  slice_head(n = 5) |>\n  select(COUNTY_NAM, n_vuln_tracts, n_under_tracts, pct_under_of_vuln)\n\n# top5_counties_under - hidden from output\n\n# Which counties have the most vulnerable people living far from hospitals?\n# Reminder: Underserved populations = vulnerable populations living far from hospitals\ntop5_under_pops <- county_level_stats |>\n  arrange(desc(total_under_pop)) |>\n  slice_head(n = 10) |>\n  select(COUNTY_NAM, total_under_pop)\n\n# top5_under_pops - hidden from output\n```\n:::\n\n\n**Required county-level statistics:**\n\n\n- Number of vulnerable tracts\n\n\n- Number of underserved tracts\n\n\n- Percentage of vulnerable tracts that are underserved\n\n\n- Average distance to nearest hospital for vulnerable tracts\n\n\n- Total vulnerable population\n\n\n**Analysis:**\n\n\n- The five counties with the highest percentage of underserved tracts among vulnerable tracts are Bradford, Cameron, Potter, Sullivan, and Tioga.\n\n\n- The counties with the most vulnerable people living far from hospitals are Pike, Bradford, Clearfield, Elk, and Chester.\n\n\n- There is a common theme that most underserved tracts with worse access to nearby hospitals come from more rural counties in North Central PA. This intuitively makes sense for a few reasons. Firstly, there are less hospitals in those counties. Secondly, the counties in this region of PA are geographically larger as well as the census tracts within them. The combination of less hospitals and larger census tract areas means there is less access to nearby hospitals (within the 15 mile threshold), leading to higher underserved populations. It is hard to distinguish patterns from tables alone; therefore, we will supplement this analysis with plots in future sections.\n\n---\n\n#### Step 7: Create Summary Table \n\nCreate a professional table showing the top 10 priority counties for healthcare investment.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create and format priority counties table\npriority_counties <- county_level_stats |>\n  arrange(desc(total_under_pop)) |>\n  slice_head(n = 10) |>\n  transmute(\n    County = COUNTY_NAM,\n    `Underserved Population` = comma(total_under_pop),\n    `Vulnerable tracts` = n_vuln_tracts,\n    `Underserved tracts` = n_under_tracts,\n    `% of Underserved Tracts` = percent(pct_under_of_vuln / 100, accuracy = 0.1),\n    `Avg distance to Hospital for Vulnerable Tracts` = number(avg_dist_vuln_hosp, accuracy = 0.01)\n  )\n  \n  \nkable(priority_counties, \n      caption = \"Top 10 Priority Counties for Healthcare Investment in PA\",\n      format.args = list(big.mark = \",\"))\n```\n\n::: {.cell-output-display}\n\n\nTable: Top 10 Priority Counties for Healthcare Investment in PA\n\n|County     |Underserved Population | Vulnerable tracts| Underserved tracts|% of Underserved Tracts |Avg distance to Hospital for Vulnerable Tracts |\n|:----------|:----------------------|-----------------:|------------------:|:-----------------------|:----------------------------------------------|\n|PIKE       |7,666                  |                12|                  5|41.7%                   |15.90                                          |\n|BRADFORD   |7,166                  |                 2|                  2|100.0%                  |18.35                                          |\n|CLEARFIELD |5,891                  |                 4|                  2|50.0%                   |12.75                                          |\n|ELK        |5,891                  |                 3|                  2|66.7%                   |12.89                                          |\n|CHESTER    |5,626                  |                13|                  1|7.7%                    |5.79                                           |\n|CLINTON    |5,578                  |                 4|                  3|75.0%                   |15.51                                          |\n|POTTER     |5,578                  |                 3|                  3|100.0%                  |17.40                                          |\n|LUZERNE    |4,905                  |                31|                  3|9.7%                    |5.15                                           |\n|CAMERON    |4,536                  |                 2|                  2|100.0%                  |18.93                                          |\n|SULLIVAN   |3,860                  |                 3|                  3|100.0%                  |20.97                                          |\n\n\n:::\n:::\n\n\n**Requirements:**\n\n\n- Use `knitr::kable()` or similar for formatting\n\n\n- Include descriptive column names\n\n\n- Format numbers appropriately (commas for population, percentages, etc.)\n\n\n- Add an informative caption\n\n\n- Sort by priority (you decide the metric)\n\n\n---\n\n## Part 2: Comprehensive Visualization \n\nUsing the skills from Week 3 (Data Visualization), create publication-quality maps and charts.\n\n### Map 1: County-Level Choropleth \n\nCreate a choropleth map showing healthcare access challenges at the county level.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create county-level access map\n\ncounty_level_stats_sf <- pa_county_bounds |>\n  select(COUNTY_NAM, geometry) |>\n  left_join(county_level_stats, by = \"COUNTY_NAM\") |>\n  st_transform(5070)\n\nggplot() +\n  geom_sf(data = county_level_stats_sf, aes(fill = pct_under_of_vuln), color = \"slategray\", size = 0.75) +\n  geom_sf(data = hospitals, color = \"black\", size = 1.5) +\n  scale_fill_distiller(\n    palette = \"Reds\",\n    direction = 1,\n    na.value = \"gray\",\n    name = \"% of underserved tracts\",\n    labels = scales::label_percent(accuracy = 1, scale = 1)\n  ) +\n  labs(\n    title = \"Healthcare Access Challenges in PA Counties\",\n    subtitle = \"Underserved Tracts: Vulnerable tracts that are >15 miles from the nearest hospital.\",\n    caption = \"Vulnerable Tracts: Tracts below 10th percentile in income or above 90th percentile in elderly population.\"\n  ) +\n  theme_void() +\n  theme(\n    legend.position = \"right\",\n    legend.title = element_text(size = 10),\n    legend.text = element_text(size = 8),\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_text()\n  )\n```\n\n::: {.cell-output-display}\n![](assignment2_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n**Requirements:**\n\n\n- Fill counties by percentage of vulnerable tracts that are underserved\n\n\n- Include hospital locations as points\n\n\n- Use an appropriate color scheme\n\n\n- Include clear title, subtitle, and caption\n\n\n- Use `theme_void()` or similar clean theme\n\n\n- Add a legend with formatted labels\n\n\n---\n\n### Map 2: Detailed Vulnerability Map \n\nCreate a map highlighting underserved vulnerable tracts.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create detailed tract-level map\n\ncrs <- 5070\npa_tract_flagged  <- st_transform(pa_tract_flagged, crs)\npa_county_bounds <- st_transform(pa_county_bounds, crs)\nhospitals <- st_transform(hospitals, crs)\n\nunderserved_tracts <- pa_tract_flagged |>\n  filter(underserved)\n\nggplot() +\n  # Tracts\n  geom_sf(data = pa_tract_flagged, fill = \"gray\", color = \"white\", size = 0.07) +\n  \n  # Underserved tracts\n  geom_sf(data = underserved_tracts, aes(fill = total_popE),size = 0.2) +\n\n  # County boundaries \n  geom_sf(data = pa_county_bounds, fill = NA, color = \"slategrey\", size = 0.7) +\n\n  # Hospitals \n  geom_sf(data = hospitals, color = \"black\", size = 2) +\n\n  # Color scale by underserved population sizes\n  scale_fill_distiller(\n    palette = \"Reds\", \n    direction = 1,\n    na.value = \"transparent\",\n    name = \"Underserved population\",\n    labels = scales::label_comma()\n  ) +\n  # Title, subtitle, caption\n  labs(\n    title = \"Underserved Vulnerable Census Tracts in Pennsylvania\",\n    subtitle = \"Underserved Tracts: Vulnerable tracts that are >15 miles from the nearest hospital.\",\n    caption = \"Vulnerable Tracts: Tracts below 10th percentile in income or above 90th percentile in elderly population.\"\n  ) +\n  # Theme, positioning, sizing\n  theme_void() +\n  theme(\n    legend.position = \"right\",\n    legend.title = element_text(size = 10),\n    legend.text = element_text(size = 8),\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_text()\n  )\n```\n\n::: {.cell-output-display}\n![](assignment2_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n**Requirements:**\n\n\n- Show underserved vulnerable tracts in a contrasting color\n\n\n- Include county boundaries for context\n\n\n- Show hospital locations\n\n\n- Use appropriate visual hierarchy (what should stand out?)\n\n\n- Include informative title and subtitle\n\n\n---\n\n### Chart: Distribution Analysis\n\nCreate a visualization showing the distribution of distances to hospitals for vulnerable populations.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get median distance to hospital among vuln tracts\nmedian_dist  <- median(pa_tract_vuln$dist_to_near_hosp, na.rm = TRUE)\n\n# Create distribution visualization\nggplot(pa_tract_vuln, aes(x = dist_to_near_hosp)) +\n  # Histogram\n  geom_histogram(binwidth = 1, boundary = 0, closed = \"left\", fill = \"skyblue\", color = \"black\", linewidth = 0.3) +\n  # Underserved threshold (15 miles)\n  geom_vline(xintercept = 15, color = \"firebrick\", linewidth = 0.7) +\n  annotate(\"text\",\n           x = 15, \n           y = 100, \n           label = \"Underserved Threshold\", \n           hjust = - 0.1, \n           color = \"firebrick\", \n           size = 3) +\n  # Median distance\n  geom_vline(xintercept = median_dist, color = \"black\", linewidth = 0.7) +\n  annotate(\"text\",\n           x = median_dist, \n           y = 100, \n           label = \"Median Distance\", \n           hjust = - 0.1, \n           color = \"black\", \n           size = 3) +\n  # Title, axes labels, caption\n  labs(\n    title = \"Distance to Nearest Hospital for Vulnerable Census Tracts in PA\",\n    x = \"Distance to Nearest Hospital (miles)\",\n    y = \"Number of Tracts\",\n    caption = \"The data is right-skewed with a majority of vulnerable tracts below our underserved threshold. 50% of tracts are within 2 miles of the nearest hospital.\") +\n  # Theme\n  theme_minimal() +\n  # Resize the caption text to fit\n  theme(plot.caption = element_text(size = 7.5))\n```\n\n::: {.cell-output-display}\n![](assignment2_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n**Suggested chart types:**\n\n\n- Histogram or density plot of distances\n\n\n- Box plot comparing distances across regions\n\n\n- Bar chart of underserved tracts by county\n\n\n- Scatter plot of distance vs. vulnerable population size\n\n\n**Requirements:**\n\n\n- Clear axes labels with units\n\n\n- Appropriate title\n\n\n- Professional formatting\n\n\n- Brief interpretation (1-2 sentences as a caption or in text)\n\n\n---\n\n## Part 3: Bring Your Own Data Analysis \n\nChoose your own additional spatial dataset and conduct a supplementary analysis.\n\n### Challenge Options\n\nChoose ONE of the following challenge exercises, or propose your own research question using OpenDataPhilly data (https://opendataphilly.org/datasets/). \n\n**Note these are just loose suggestions to spark ideas - follow or make your own as the data permits and as your ideas evolve. This analysis should include bringing in your own dataset, ensuring the projection/CRS of your layers align and are appropriate for the analysis (not lat/long or geodetic coordinate systems). The analysis portion should include some combination of spatial and attribute operations to answer a relatively straightforward question**\n\n---\n\n#### Education & Youth Services\n\n**Option A: Educational Desert Analysis**\n- **Data:** Schools, Libraries, Recreation Centers, Census tracts (child population)\n- **Question:** \"Which neighborhoods lack adequate educational infrastructure for children?\"\n- **Operations:** Buffer schools/libraries (0.5 mile walking distance), identify coverage gaps, overlay with child population density\n- **Policy relevance:** School district planning, library placement, after-school program siting\n\n**Option B: School Safety Zones**\n- **Data:** Schools, Crime Incidents, Bike Network\n- **Question:** \"Are school zones safe for walking/biking, or are they crime hotspots?\"\n- **Operations:** Buffer schools (1000ft safety zone), spatial join with crime incidents, assess bike infrastructure coverage\n- **Policy relevance:** Safe Routes to School programs, crossing guard placement\n\n---\n\n#### Environmental Justice\n\n**Option C: Green Space Equity** \n- **Data:** Parks, Street Trees, Census tracts (race/income demographics)\n- **Question:** \"Do low-income and minority neighborhoods have equitable access to green space?\"\n- **Operations:** Buffer parks (10-minute walk = 0.5 mile), calculate tree canopy or park acreage per capita, compare by demographics\n- **Policy relevance:** Climate resilience, environmental justice, urban forestry investment\n---\n\n#### Public Safety & Justice\n\n**Option D: Crime & Community Resources**\n- **Data:** Crime Incidents, Recreation Centers, Libraries, Street Lights\n- **Question:** \"Are high-crime areas underserved by community resources?\"\n- **Operations:** Aggregate crime counts to census tracts or neighborhoods, count community resources per area, spatial correlation analysis\n- **Policy relevance:** Community investment, violence prevention strategies\n---\n\n#### Infrastructure & Services\n\n**Option E: Polling Place Accessibility**\n- **Data:** Polling Places, SEPTA stops, Census tracts (elderly population, disability rates)\n- **Question:** \"Are polling places accessible for elderly and disabled voters?\"\n- **Operations:** Buffer polling places and transit stops, identify vulnerable populations, find areas lacking access\n- **Policy relevance:** Voting rights, election infrastructure, ADA compliance\n\n---\n\n#### Health & Wellness\n\n**Option F: Recreation & Population Health**\n- **Data:** Recreation Centers, Playgrounds, Parks, Census tracts (demographics)\n- **Question:** \"Is lack of recreation access associated with vulnerable populations?\"\n- **Operations:** Calculate recreation facilities per capita by neighborhood, buffer facilities for walking access, overlay with demographic indicators\n- **Policy relevance:** Public health investment, recreation programming, obesity prevention\n\n---\n\n#### Emergency Services\n\n**Option G: EMS Response Coverage**\n- **Data:** Fire Stations, EMS stations, Population density, High-rise buildings\n- **Question:** \"Are population-dense areas adequately covered by emergency services?\"\n- **Operations:** Create service area buffers (5-minute drive = ~2 miles), assess population coverage, identify gaps in high-density areas\n- **Policy relevance:** Emergency preparedness, station siting decisions\n\n---\n\n#### Arts & Culture\n\n**Option H: Cultural Asset Distribution**\n- **Data:** Public Art, Museums, Historic sites/markers, Neighborhoods\n- **Question:** \"Do all neighborhoods have equitable access to cultural amenities?\"\n- **Operations:** Count cultural assets per neighborhood, normalize by population, compare distribution across demographic groups\n- **Policy relevance:** Cultural equity, tourism, quality of life, neighborhood identity\n\n---\n\n### Data Sources\n\n**OpenDataPhilly:** https://opendataphilly.org/datasets/\n- Most datasets available as GeoJSON, Shapefile, or CSV with coordinates\n- Always check the Metadata for a data dictionary of the fields.\n\n**Additional Sources:**\n- **Pennsylvania Open Data:** https://data.pa.gov/\n- **Census Bureau (via tidycensus):** Demographics, economic indicators, commute patterns\n- **TIGER/Line (via tigris):** Geographic boundaries\n\n### Recommended Starting Points\n\n**If you're feeling confident:** Choose an advanced challenge with multiple data layers. \n**If you are a beginner, choose something more manageable that helps you understand the basics**\n\n\n**If you have a different idea:** Propose your own question! Just make sure:\n- You can access the spatial data\n- You can perform at least 2 spatial operations\n\n### Your Analysis\n\n\n1. **Find and load additional data**\n\n\n   - Document your data source\n   \n   \n   - Check and standardize the CRS\n   \n   \n   - Provide basic summary statistics\n   \n   \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load crime, ppr sites, and street light datasets\ncrime <- st_read(\"data/crime_incidents.shp\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `crime_incidents' from data source \n  `/Users/jack/Documents/GitHub/portfolio-setup-jbader14/assignments/assignment2/data/crime_incidents.shp' \n  using driver `ESRI Shapefile'\nreplacing null geometries with empty geometries\nSimple feature collection with 117984 features and 13 fields (with 4770 geometries empty)\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -75.27421 ymin: 5.684342e-14 xmax: 5.684342e-14 ymax: 40.13683\nGeodetic CRS:  WGS 84\n```\n\n\n:::\n\n```{.r .cell-code}\nppr_sites <- st_read(\"data/PPR_Program_Sites.geojson\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `PPR_Program_Sites' from data source \n  `/Users/jack/Documents/GitHub/portfolio-setup-jbader14/assignments/assignment2/data/PPR_Program_Sites.geojson' \n  using driver `GeoJSON'\nSimple feature collection with 171 features and 10 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -75.2563 ymin: 39.90444 xmax: -74.96944 ymax: 40.12284\nGeodetic CRS:  WGS 84\n```\n\n\n:::\n\n```{.r .cell-code}\nlights <- st_read(\"data/Street_Poles.geojson\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `Street_Poles' from data source \n  `/Users/jack/Documents/GitHub/portfolio-setup-jbader14/assignments/assignment2/data/Street_Poles.geojson' \n  using driver `GeoJSON'\nSimple feature collection with 202942 features and 16 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -75.28108 ymin: 39.87517 xmax: -74.95891 ymax: 40.13786\nGeodetic CRS:  WGS 84\n```\n\n\n:::\n\n```{.r .cell-code}\n# Transform CRS to EPSG: 2272 (South PA)\ncrime <- st_transform(crime, 2272)\nppr_sites <- st_transform(ppr_sites, 2272)\nlights <- st_transform(lights, 2272)\n\n# Get Philadelphia tract data\nphl_tracts <- get_acs(\n  geography = \"tract\",\n  variables = c(total_pop = \"B01003_001\"),\n  state = \"PA\",\n  county = \"Philadelphia\",\n  year = 2023,\n  survey = \"acs5\",\n  geometry = TRUE,\n  output = \"wide\",\n  cache_table = TRUE\n)\n\n# Transform CRS to EPSG: 2272\nphl_tracts <- st_transform(phl_tracts, 2272)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Crime Summary Stats\n\ncrime <- crime |>\n  # Create a column for time of day\n  mutate(\n    time_of_day = case_when(\n      hour >= 0  & hour <= 5 ~ \"night\",\n      hour >= 6  & hour <=11 ~ \"morning\",\n      hour >=12  & hour <=17 ~ \"afternoon\",\n      TRUE                   ~ \"evening\"\n    )\n  )\n\n# Summary Stats: Type of Crime\ncrime_type <- crime |>\n  # Drop geometry\n  st_drop_geometry() |>\n  # Group by type\n  group_by(text_gener) |>\n  # Count each type of crime\n  summarize(count = n()) |>\n  # Arrange by desc count\n  arrange(desc(count))\n\n# Summary Stats: Time of Day\ncrime_tod <- crime |>\n  # Drop geometry\n  st_drop_geometry() |>\n  # Group by time of day\n  group_by(time_of_day) |>\n  # Count crimes for each time of day\n  summarize(count = n()) |>\n  # Arrange by desc count\n  arrange(desc(count))\n\n# Create tables for each summary stat\n\ncrime_type_table <- crime_type |>\n  # Create percentage variable\n  mutate(pct = count / sum(count)) |>\n  mutate(\n    # Add commas for count, % symbols for percentage (rounded)\n    count = comma(count),\n    pct   = percent(pct, accuracy = 0.01)\n  ) |>\n  # Select top 10 most common crimes by type\n  slice_head(n = 10)\n\ncrime_tod_table <- crime_tod |>\n  mutate(pct = count / sum(count)) |>\n  mutate(\n    count = comma(count),\n    pct   = percent(pct, accuracy = 0.01)\n  )\n\n# Display summary statistics using kable()\nkable(\n  crime_type_table,\n  col.names = c(\"Crime type\", \"Count\", \"Percent\"),\n  caption = \"Crime incidents by Type\"\n)\n```\n\n::: {.cell-output-display}\n\n\nTable: Crime incidents by Type\n\n|Crime type                     |Count  |Percent |\n|:------------------------------|:------|:-------|\n|Thefts                         |28,206 |23.91%  |\n|Other Assaults                 |20,323 |17.23%  |\n|All Other Offenses             |12,796 |10.85%  |\n|Motor Vehicle Theft            |11,542 |9.78%   |\n|Vandalism/Criminal Mischief    |9,841  |8.34%   |\n|Theft from Vehicle             |7,521  |6.37%   |\n|Fraud                          |7,161  |6.07%   |\n|Aggravated Assault No Firearm  |4,170  |3.53%   |\n|Burglary Residential           |2,429  |2.06%   |\n|Narcotic / Drug Law Violations |1,875  |1.59%   |\n\n\n:::\n\n```{.r .cell-code}\nkable(\n  crime_tod_table,\n  col.names = c(\"Time of day\", \"Count\", \"Percent\"),\n  caption = \"Crime incidents by Time of Day\"\n)\n```\n\n::: {.cell-output-display}\n\n\nTable: Crime incidents by Time of Day\n\n|Time of day |Count  |Percent |\n|:-----------|:------|:-------|\n|afternoon   |42,762 |36.24%  |\n|morning     |33,324 |28.24%  |\n|evening     |29,275 |24.81%  |\n|night       |12,623 |10.70%  |\n\n\n:::\n:::\n\n\n**Analysis:**\n\n\n- The datasets used were crime incidents, Park and Rec Program (PPR) sites, and street lights.These datasets were selected to conduct crime analysis at the tract level in Philadelphia. Our goal was to see if tracts with greater street light densities and access to nearby PPR sites experienced lower crime levels.\n\n\n- The data source for all of our datasets came from from openphilly.org. Crime incidents are from 2025, and PPR sites are from 2022. There is no date associated with the street lights dataset.\n\n\n- Dataset Features:\n  - Crime incidents: 14 features\n  - PPR programs: 11 features\n  - Street lights: 17 features\n\n\n- The CRS for the data was in WGS 84. I changed it to a projected CRS such as StatePlane PA South that is more locally accurate for area and distance calculations with low distortion levels.\n\n- We calculated count and percentage statistics from the crimes dataset, grouping by type of crime and time of day.\n\n---\n\n2. **Pose a research question**\n\nIn Philadelphia, do census tracts with worse access to recreation centers and fewer street lights experience higher evening / night time crime rates?\n\n---\n\n3. **Conduct spatial analysis**\n\nUse at least TWO spatial operations to answer your research question.\n\n**Required operations (choose 2+):**\n\n\n- Buffers\n\n\n- Spatial joins\n\n\n- Spatial filtering with predicates\n\n\n- Distance calculations\n\n\n- Intersections or unions\n\n\n- Point-in-polygon aggregation\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Step 1a: Filter crime for only evening + night crimes for street lights analysis\ncrime_en <- crime |>\n  filter(time_of_day %in% c(\"evening\", \"night\"))\n\n# Step 1b: Filter crime for only morning + afternoon crimes for PPR sites analysis\ncrime_am <- crime |>\n  filter(time_of_day %in% c(\"morning\", \"afternoon\"))\n\n# Step 2: Spatial Join - crime, lights with census tracts\ncrime_tracts_en <- st_join(crime_en, phl_tracts, join = st_within)\ncrime_tracts_am <- st_join(crime_am, phl_tracts, join = st_within)\nlight_tracts <- st_join(lights, phl_tracts, join = st_within)\n\n# Step 3: Calculate total number of crimes and street lights per tract\ncrime_count_en <- crime_tracts_en |>\n  st_drop_geometry() |>\n  filter(!is.na(GEOID)) |>\n  group_by(GEOID) |>\n  summarise(crime_count_en = n(), .groups = \"drop\")\n\ncrime_count_am <- crime_tracts_am |>\n  st_drop_geometry() |>\n  filter(!is.na(GEOID)) |>\n  group_by(GEOID) |>\n  summarise(crime_count_am = n(), .groups = \"drop\")\n\nlights_count <- light_tracts |>\n  st_drop_geometry() |>\n  filter(!is.na(GEOID)) |>\n  group_by(GEOID) |>\n  summarise(lights_count = n(), .groups = \"drop\")\n\n# Step 4: Calculate distance to nearest ppr site for each tract centroid\n\n# Calculate tract centroids\ntr_centroids <- st_centroid(phl_tracts)\n\n# Create distance matrix between centroids & ppr sites\ndist_to_ppr <- st_distance(tr_centroids, ppr_sites)\n\n# Find closest ppr site to each centroid\nmin_dist_to_ppr <- apply(dist_to_ppr, 1, min)\n\nphl_tracts_dist_ppr <- phl_tracts |>\n  st_drop_geometry() |>\n  # Create new min dist feature\n  mutate(dist_to_ppr = round(as.numeric(min_dist_to_ppr) / 5280, 2))\n\n# Step 5: Join dataframes together to get tract-level statistics\ncrime_ppr_light_stats <- phl_tracts_dist_ppr |>\n  # Drop geometry\n  st_drop_geometry() |>\n  # Join in crime counts and light counts\n  left_join(crime_count_am, by = \"GEOID\") |>\n  left_join(crime_count_en, by = \"GEOID\") |>\n  left_join(lights_count,  by = \"GEOID\")\n\n# Step 6: Add geometry back to stats df for mapping\ncrime_ppr_light_stats_sf <- phl_tracts |>\n  select(GEOID, geometry) |>\n  left_join(crime_ppr_light_stats, by = \"GEOID\")\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Step 7: Plot a choropleth across PA census tracts w/ point geom for PPR sites\nggplot(crime_ppr_light_stats_sf) +\n  geom_sf(aes(fill = crime_count_am), color = \"slategray\") +\n  geom_sf(data = ppr_sites, color = \"black\", size = 1.5) +\n  scale_fill_distiller(\n    palette = \"Reds\", direction = 1, na.value = \"gray\",\n    name = \"Morning/Afternoon crimes\"\n  ) +\n  labs(\n    title = \"Morning/Afternoon Crimes in Philadelphia Census Tracts\",\n    subtitle = \"Points represent park and recreation sites.\"\n  ) +\n  theme_void() +\n  theme(\n    legend.position = \"right\",\n    plot.title = element_text(face = \"bold\")\n  )\n```\n\n::: {.cell-output-display}\n![](assignment2_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Step 7b: Create similar choropleth but find crime heavy tracts\n# Where crime count is at or above 75th percentile\n\n# Crime-heavy threshold at the 75th percentile\ncrime_thr <- quantile(crime_ppr_light_stats_sf$crime_count_am, probs = 0.75, na.rm = TRUE)\n\n# Create var that labels tracts as crime-heavy vs other\ncrime_flagged <- crime_ppr_light_stats_sf |>\n  mutate(crime_bucket = if_else(!is.na(crime_count_am) & crime_count_am >= crime_thr,\"Crime-heavy\", \"Other tracts\"))\n\n# Plot Choropleth\nggplot() +\n  geom_sf(data = crime_flagged, aes(fill = crime_bucket), color = \"white\", size = 0.1) +\n  geom_sf(data = ppr_sites, color = \"black\", size = 1.5) +\n  scale_fill_manual(\n    values = c(\"Other tracts\" = \"gray\", \"Crime-heavy\" = \"firebrick\"),\n    guide = guide_legend(title = NULL, override.aes = list(color = NA))\n  ) +\n  labs(\n    title = \"Crime-Heavy Census Tracts in Philadelphia\",\n    subtitle = paste0(\"Crime-heavy tracts are at or above the 75th percentile of crime counts.\"),\n    caption = \"This data is for morning to afternoon crimes.\"\n  ) +\n  theme_void() +\n  theme(\n    legend.position = \"right\",\n    plot.title = element_text(face = \"bold\")\n  )\n```\n\n::: {.cell-output-display}\n![](assignment2_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Step 8: Output table for crime counts, light counts, and distance to nearest ppr site\ntable_am <- crime_ppr_light_stats |>\n  # Select relevant cols\n  select(GEOID, crime_count_am, dist_to_ppr) |>\n  # Order by descending AM crime count\n  arrange(desc(crime_count_am)) |>\n  # Format for kable()\n  mutate(\n    crime_count_am = comma(crime_count_am),\n    dist_to_ppr    = number(dist_to_ppr, accuracy = 0.01)\n  ) |>\n  slice_head(n = 10)\n\nkable(\n  table_am,\n  col.names = c(\"GEOID\", \"Crimes (Morning/Afternoon)\", \"Nearest PPR (miles)\"),\n  caption = \"Morning/Afternoon Crimes in Philadelphia Tracts with Distance to Nearest PPR Site\"\n)\n```\n\n::: {.cell-output-display}\n\n\nTable: Morning/Afternoon Crimes in Philadelphia Tracts with Distance to Nearest PPR Site\n\n|GEOID       |Crimes (Morning/Afternoon) |Nearest PPR (miles) |\n|:-----------|:--------------------------|:-------------------|\n|42101017800 |1,058                      |0.27                |\n|42101000500 |995                        |0.58                |\n|42101017701 |729                        |0.16                |\n|42101017702 |703                        |0.21                |\n|42101011100 |637                        |0.35                |\n|42101029800 |561                        |0.26                |\n|42101036902 |538                        |0.44                |\n|42101000701 |523                        |0.61                |\n|42101037900 |520                        |0.24                |\n|42101014700 |505                        |0.24                |\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Step 8b: Evening/Night crimes with streetlight counts\ntable_pm <- crime_ppr_light_stats |>\n  select(GEOID, crime_count_en, lights_count) |>\n  arrange(desc(crime_count_en)) |>\n  mutate(\n    crime_count_en = comma(crime_count_en),\n    lights_count   = comma(lights_count)\n  ) |>\n  slice_head(n = 10)\n\nkable(\n  table_pm,\n  col.names = c(\"Tract GEOID\", \"Crimes (Evening/Night)\", \"Streetlights\"),\n  caption = \"Evening/Night Crimes in Philadelphia Tracts with Streetlight Counts\"\n)\n```\n\n::: {.cell-output-display}\n\n\nTable: Evening/Night Crimes in Philadelphia Tracts with Streetlight Counts\n\n|Tract GEOID |Crimes (Evening/Night) |Streetlights |\n|:-----------|:----------------------|:------------|\n|42101017800 |642                    |860          |\n|42101017701 |434                    |443          |\n|42101037900 |418                    |1,107        |\n|42101000500 |415                    |838          |\n|42101017702 |369                    |614          |\n|42101014700 |325                    |326          |\n|42101034900 |284                    |672          |\n|42101011100 |284                    |800          |\n|42101006600 |277                    |546          |\n|42101015200 |277                    |700          |\n\n\n:::\n:::\n\n\n```\n\n**Analysis requirements:**\n\n\n- Clear code comments explaining each step\n\n\n- Appropriate CRS transformations\n\n\n- Summary statistics or counts\n\n\n- At least one map showing your findings\n\n\n- Brief interpretation of results (3-5 sentences)\n\n\n**Interpretation:**\nLooking at the choropleths and tables, it does not seem there is a strong relationship between number of crimes and nearby PPR sites / number of streetlights. Even by seperating the data to analyze morning/afternoon crimes with PPR sites and evening/night crimes with PPR sites, there are not significant discoveries or trends to be made from plots and tables alone. From the choropleth of crime-heavy tracts, it does look like these tracts do cluster near eachother, signifying they belong to unsafe neighborhoods. Additionally, from the tables, tracts that experience high crime levels in the morning/afternoon tend to have higher crime levels in the evening/night at a glance. For further research, I think it would be beneficial to do zip code level analysis to get a better sense of patterns in crime throughout Philadelphia in larger geographic regions than at the tract level. I also think it could be valuable to normalize crime counts into rates using population data and street light counts into densities with area data. However, it may be the case that these variables are not strong indicators or predictors of crime level throughout the city. For that, we could do correlation, regression analyses among others to delve deeper into the factors that cause high crime, which can benefit policymakers in their decision-making.  \n\n\n## Incorporation of Feedback:\nI made sure to delete brackets and questions. I hid outputs not required by the assignment's instructions. I also hid the census API key in a .env file.\n\n---\n\n## Submission Requirements\n\n**What to submit:**\n\n1. **Rendered HTML document posted to your course portfolio** with all code, outputs, maps, and text\n   - Use `embed-resources: true` in YAML so it's a single file\n   - All code should run without errors\n   - All maps and charts should display correctly\n\n**File naming:** `LastName_FirstName_Assignment2.html` and `LastName_FirstName_Assignment2.qmd`\n\n---\n\n",
    "supporting": [
      "assignment2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}